# WR124 - å¤šç§Ÿæˆ·æ™ºèƒ½ä½“ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªå®Œæ•´çš„å¤šç§Ÿæˆ·æ™ºèƒ½ä½“ä»»åŠ¡ç®¡ç†ç³»ç»Ÿï¼Œé›†æˆ Model Context Protocol (MCP) æœåŠ¡ã€AI æ™ºèƒ½ä½“å’Œç°ä»£åŒ–å‰ç«¯ç•Œé¢ï¼Œä¸º AI é©±åŠ¨çš„é¡¹ç›®ç®¡ç†å’Œå¼€å‘æä¾›å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚

## ğŸ¯ é¡¹ç›®æ¦‚è§ˆ

WR124 æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„æ™ºèƒ½ä½“ä»»åŠ¡ç®¡ç†ç³»ç»Ÿï¼Œç”±ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶æ„æˆï¼š

- **wr124/** - AI æ™ºèƒ½ä½“æ ¸å¿ƒæ¡†æ¶ï¼ŒåŸºäº AutoGen çš„å…ˆè¿›æ™ºèƒ½ä½“ç³»ç»Ÿ
- **shrimp/** - MCPï¼ˆModel Context Protocolï¼‰ä»»åŠ¡ç®¡ç†æœåŠ¡ï¼Œæä¾› REST API å’Œ MCP åè®®æ”¯æŒ  
  - ğŸ”— ç‹¬ç«‹ä»£ç åº“ï¼š[weinaike/shrimp-backend](https://github.com/weinaike/shrimp-backend)
- **frontend/** - React å‰ç«¯åº”ç”¨ï¼Œæä¾›ç›´è§‚çš„ä»»åŠ¡ç®¡ç†ç•Œé¢
  - ğŸ”— ç‹¬ç«‹ä»£ç åº“ï¼š[weinaike/shrimp-frontend](https://github.com/weinaike/shrimp-frontend)

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ—ï¸ ç³»ç»Ÿæ¶æ„
- **å¤šç§Ÿæˆ·éš”ç¦»**ï¼šåŸºäº `project_id` çš„å®Œæ•´æ•°æ®éš”ç¦»
- **å¾®æœåŠ¡æ¶æ„**ï¼šå‰åç«¯åˆ†ç¦»çš„ç°ä»£åŒ–è®¾è®¡
- **å®æ—¶åŒæ­¥**ï¼šå‰åç«¯å®æ—¶æ•°æ®åŒæ­¥
- **äº‹ä»¶é©±åŠ¨**ï¼šåŸºäºäº‹ä»¶æ€»çº¿çš„å¯æ‰©å±•æ¶æ„

### ğŸ¤– æ™ºèƒ½ä½“åŠŸèƒ½
- **AutoGen é›†æˆ**ï¼šåŸºäºæœ€å…ˆè¿›çš„ AutoGen æ¡†æ¶
- **ä»»åŠ¡åˆ†è§£**ï¼šAI é©±åŠ¨çš„å¤æ‚ä»»åŠ¡è‡ªåŠ¨åˆ†è§£
- **æ™ºèƒ½è§„åˆ’**ï¼šåŸºäºä¸Šä¸‹æ–‡çš„ä»»åŠ¡ä¼˜å…ˆçº§æ’åº
- **è®°å¿†ç³»ç»Ÿ**ï¼šçŸ¥è¯†å­˜å‚¨å’Œæ£€ç´¢å¢å¼º
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šå®Œæ•´çš„ä»»åŠ¡å˜æ›´å†å²è¿½è¸ª

### ğŸ’¾ æ•°æ®ç®¡ç†
- **MongoDB ä¸»å­˜å‚¨**ï¼šé«˜æ•ˆçš„æ–‡æ¡£æ•°æ®å­˜å‚¨
- **å‘é‡ç´¢å¼•**ï¼šä¸º RAG åº”ç”¨æä¾›è¯­ä¹‰æœç´¢
- **ç‰ˆæœ¬å†å²**ï¼šappend-only çš„ä¸å¯å˜å†å²è®°å½•
- **ä¹è§‚å¹¶å‘æ§åˆ¶**ï¼šé˜²æ­¢æ•°æ®å†²çª

### ğŸ”Œ API æœåŠ¡
- **RESTful API**ï¼šå®Œæ•´çš„ HTTP API æ¥å£
- **MCP åè®®**ï¼šåŸç”Ÿ Model Context Protocol æ”¯æŒ
- **WebSocket**ï¼šå®æ—¶åŒå‘é€šä¿¡
- **GraphQL**ï¼šå¯æ‰©å±•çš„æŸ¥è¯¢æ¥å£

### ğŸ¨ å‰ç«¯ç•Œé¢
- **React 18**ï¼šç°ä»£åŒ–çš„å“åº”å¼ç•Œé¢
- **Bootstrap 5**ï¼šç¾è§‚çš„ UI ç»„ä»¶åº“
- **å®æ—¶æ›´æ–°**ï¼šæ— éœ€åˆ·æ–°çš„å®æ—¶æ•°æ®åŒæ­¥
- **ç§»åŠ¨å‹å¥½**ï¼šå“åº”å¼è®¾è®¡é€‚é…æ‰€æœ‰è®¾å¤‡

## ğŸ“ é¡¹ç›®ç»“æ„

```
wr124/
â”œâ”€â”€ wr124/                    # AI æ™ºèƒ½ä½“æ¡†æ¶
â”‚   â”œâ”€â”€ agent_base.py        # åŸºç¡€æ™ºèƒ½ä½“ç±»
â”‚   â”œâ”€â”€ agent_plan.py        # ä»»åŠ¡è§„åˆ’å™¨
â”‚   â”œâ”€â”€ filesystem/          # æ–‡ä»¶ç³»ç»Ÿå·¥å…·
â”‚   â””â”€â”€ prompt_*.py          # æç¤ºè¯æ¨¡æ¿
â”œâ”€â”€ shrimp/                   # MCP ä»»åŠ¡ç®¡ç†æœåŠ¡ (Git å­æ¨¡å—)
â”‚   â”œâ”€â”€ main.py              # æœåŠ¡ç«¯å…¥å£
â”‚   â”œâ”€â”€ api/                 # REST API è·¯ç”±
â”‚   â”œâ”€â”€ services/            # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ tools/               # MCP å·¥å…·å®šä¹‰
â”œâ”€â”€ frontend/                 # React å‰ç«¯åº”ç”¨ (Git å­æ¨¡å—)
â”‚   â”œâ”€â”€ src/App.js           # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ src/components/      # UI ç»„ä»¶åº“
â”‚   â””â”€â”€ package.json         # å‰ç«¯ä¾èµ–é…ç½®
â”œâ”€â”€ docs/                     # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ tests/                    # æµ‹è¯•å¥—ä»¶
â”œâ”€â”€ script/                   # å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md                # é¡¹ç›®è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

> **æ³¨æ„**ï¼š`shrimp/` å’Œ `frontend/` ç›®å½•æ˜¯ Git å­æ¨¡å—ï¼Œåˆ†åˆ«å¯¹åº”ç‹¬ç«‹çš„ä»£ç åº“ã€‚å¦‚éœ€å…‹éš†å®Œæ•´é¡¹ç›®ï¼Œè¯·ä½¿ç”¨ï¼š
> ```bash
> git clone --recursive https://github.com/weinaike/wr124.git
> # æˆ–è€…å…‹éš†ååˆå§‹åŒ–å­æ¨¡å—
> git clone https://github.com/weinaike/wr124.git
> cd wr124
> git submodule update --init --recursive
> ```

### ç¯å¢ƒè¦æ±‚

```bash
Python 3.10+
Node.js 16+
MongoDB 4.4+
```

### å®‰è£…ä¾èµ–

```bash
# å®‰è£… Python ä¾èµ–
pip install -e .

# å®‰è£…å‰ç«¯ä¾èµ–
cd frontend && npm install
```

### å¯åŠ¨æœåŠ¡

#### æ–¹æ³•1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬
```bash
# ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
python script/run_server.py
```

#### æ–¹æ³•2ï¼šæ‰‹åŠ¨å¯åŠ¨
```bash
# å¯åŠ¨ MongoDB æœåŠ¡
mongod

# å¯åŠ¨ MCP æœåŠ¡ï¼ˆç«¯å£ 8000ï¼‰
python -m shrimp.main

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆç«¯å£ 3000ï¼‰
cd frontend && npm start

# å¯åŠ¨ AI æ™ºèƒ½ä½“
python script/run_agent.py
```

### è®¿é—®æœåŠ¡

- **å‰ç«¯ç•Œé¢**ï¼šhttp://localhost:3000
- **API æ–‡æ¡£**ï¼šhttp://localhost:8000/docs
- **MCP ç«¯ç‚¹**ï¼šhttp://localhost:8000/mcp
- **æ•°æ®åº“**ï¼šmongodb://localhost:27017/wr124

## ğŸ”§ æ ¸å¿ƒç»„ä»¶è¯¦ç»†è¯´æ˜

### WR124 - AI æ™ºèƒ½ä½“æ¡†æ¶

**åŠŸèƒ½å®šä½**ï¼šAI é©±åŠ¨çš„æ™ºèƒ½ç®¡ç†åŠ©æ‰‹

**æ ¸å¿ƒèƒ½åŠ›**ï¼š
- åŸºäº AutoGen çš„å¤šæ™ºèƒ½ä½“åè°ƒ
- ä»»åŠ¡è‡ªåŠ¨åŒ–åˆ†è§£å’Œè§„åˆ’
- æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†å’Œè®°å¿†
- æ–‡ä»¶ç³»ç»Ÿæ“ä½œå’Œä»£ç å®¡æŸ¥
- å®æ—¶ä»»åŠ¡çŠ¶æ€è·Ÿè¸ª

**è¿è¡Œæ¨¡å¼**ï¼š
```bash
# å¯åŠ¨æ™ºèƒ½ä½“æ§åˆ¶å°
python wr124/agent_base.py

# ä½¿ç”¨æ™ºèƒ½ä½“è¿›è¡Œä»»åŠ¡åˆ†è§£
python script/run_agent.py "åˆ›å»ºæ–°çš„ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ"
```

### Shrimp - MCP ä»»åŠ¡ç®¡ç†æœåŠ¡

**åŠŸèƒ½å®šä½**ï¼šæ ¸å¿ƒçš„ä»»åŠ¡å’Œæ•°æ®ç®¡ç†æœåŠ¡

**æœåŠ¡æ¶æ„**ï¼š
- `main.py` - FastAPI å’Œ FastMCP é›†æˆå¯åŠ¨å™¨
- `api/routes/` - RESTful API è·¯ç”±å¤„ç†å™¨
- `services/` - ä¸šåŠ¡é€»è¾‘å±‚ï¼ŒåŒ…å«ä»»åŠ¡ã€è®°å¿†ã€ç‰ˆæœ¬æœåŠ¡
- `tools/` - MCP åè®®å·¥å…·å®šä¹‰
- `models/` - Pydantic æ•°æ®æ¨¡å‹

**æ ¸å¿ƒ API**ï¼š
```
# ä»»åŠ¡ç®¡ç†
GET    /api/v1/tasks           # è·å–ä»»åŠ¡åˆ—è¡¨
POST   /api/v1/tasks           # åˆ›å»ºä»»åŠ¡
GET    /api/v1/tasks/{id}      # ä»»åŠ¡è¯¦æƒ…
PUT    /api/v1/tasks/{id}      # æ›´æ–°ä»»åŠ¡
DELETE /api/v1/tasks/{id}      # åˆ é™¤ä»»åŠ¡

# è®°å¿†ç®¡ç†  
GET    /api/v1/memories        # è·å–è®°å¿†åˆ—è¡¨
POST   /api/v1/memories        # åˆ›å»ºçŸ¥è¯†è®°å¿†
PUT    /api/v1/memories/{id}   # æ›´æ–°è®°å¿†

# ç‰ˆæœ¬æ§åˆ¶
GET    /api/v1/versions/{task_id}    # è·å–ç‰ˆæœ¬å†å²
POST   /api/v1/versions/{task_id}    # åˆ›å»ºç‰ˆæœ¬å¿«ç…§
POST   /api/v1/versions/revert/{id}  # ç‰ˆæœ¬å›æ»š
```

### Frontend - React å‰ç«¯ç•Œé¢

**åŠŸèƒ½å®šä½**ï¼šç°ä»£åŒ–çš„ç®¡ç†ç•Œé¢

**æŠ€æœ¯æ ˆ**ï¼š
- React 18 + Hooks
- Bootstrap 5 + React-Bootstrap
- Axios è¿›è¡Œ HTTP é€šä¿¡
- å®æ—¶çŠ¶æ€ç®¡ç†

**æ ¸å¿ƒç»„ä»¶**ï¼š
- **UnifiedTaskManager** - ç»Ÿåˆçš„ä»»åŠ¡ç®¡ç†ç•Œé¢
- **TaskTableView** - ä»»åŠ¡è¡¨æ ¼è§†å›¾
- **CreateTaskModal** - ä»»åŠ¡åˆ›å»ºå¯¹è¯æ¡†
- **TaskDetailModal** - ä»»åŠ¡è¯¦æƒ…æŸ¥çœ‹å™¨
- **TaskVersionModal** - ç‰ˆæœ¬å†å²æŸ¥çœ‹
- **ProjectSidebar** - å¤šé¡¹ç›®å¯¼èˆª

**å¯åŠ¨å’Œæ„å»º**ï¼š
```bash
cd frontend
npm start       # å¼€å‘æ¨¡å¼
npm run build   # ç”Ÿäº§æ„å»º
npm test        # è¿è¡Œæµ‹è¯•
```

## ğŸ“Š ä½¿ç”¨åœºæ™¯

### 1. AI è¾…åŠ©é¡¹ç›®ç®¡ç†
```bash
# åˆ›å»ºæ–°é¡¹ç›®å¹¶è‡ªåŠ¨åˆ†è§£ä»»åŠ¡
python script/run_agent.py "å¼€å‘æ–°çš„ç”µå•†ç½‘ç«™ï¼ŒåŒ…å«å•†å“ç®¡ç†ã€è®¢å•ç³»ç»Ÿå’Œæ”¯ä»˜é›†æˆ"
```

### 2. å¤šå›¢é˜Ÿåä½œ
- æ¯ä¸ªå›¢é˜Ÿæ‹¥æœ‰ç‹¬ç«‹çš„é¡¹ç›®ç©ºé—´
- ä»»åŠ¡åˆ†é…å’Œè¿›åº¦è·Ÿè¸ª
- ç‰ˆæœ¬å†å²è¿½è¸ª

### 3. çŸ¥è¯†ç®¡ç†
- å­˜å‚¨æœ€ä½³å®è·µå’ŒæŠ€æœ¯æ–‡æ¡£
- æ™ºèƒ½æœç´¢å’Œç›¸å…³æ¨è
- ç‰ˆæœ¬åŒ–çŸ¥è¯†æ›´æ–°

### 4. ä»£ç å®¡æŸ¥å·¥ä½œæµ
- AI è‡ªåŠ¨ä»£ç åˆ†æ
- å®¡æŸ¥ä»»åŠ¡åˆ†å‘
- é—®é¢˜è§£å†³è·Ÿè¸ª

## ğŸ” å¤šç§Ÿæˆ·æ¶æ„

### é¡¹ç›®éš”ç¦»æœºåˆ¶
- **æ•°æ®éš”ç¦»**ï¼šMongoDB é›†åˆçº§éš”ç¦»
- **API è·¯ç”±**ï¼šåŸºäºè¯·æ±‚å¤´çš„è‡ªåŠ¨è·¯ç”±
- **æƒé™æ§åˆ¶**ï¼šé¡¹ç›®çº§åˆ«çš„æƒé™éªŒè¯

### ä½¿ç”¨æ–¹æ³•
```bash
# æŒ‡å®šé¡¹ç›® ID åˆ›å»ºä»»åŠ¡
curl -X POST "http://localhost:8000/api/v1/tasks" \
  -H "X-Project-ID: team-alpha" \
  -H "Content-Type: application/json" \
  -d '{"name": "API å¼€å‘", "description": "ç”¨æˆ·è®¤è¯ API å®ç°"}'
```

## ğŸ§ª æµ‹è¯•å’Œå¼€å‘

### æµ‹è¯•å¥—ä»¶
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œå•å…ƒæµ‹è¯•
pytest tests/unit/

# è¿è¡Œé›†æˆæµ‹è¯•  
pytest tests/integration/

# è¿è¡Œå‹åŠ›æµ‹è¯•
pytest tests/test_task_service_stress.py
```

### å¼€å‘å·¥å…·
```bash
# ä»£ç æ ¼å¼åŒ–
black wr124/ shrimp/

# ç±»å‹æ£€æŸ¥
mypy wr124/ shrimp/

# å‰ç«¯ä»£ç æ£€æŸ¥
npm run lint  # å‰ç«¯é¡¹ç›®
```

## ğŸ“¦ éƒ¨ç½²æŒ‡å—

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```bash
# 1. æ„å»ºå‰ç«¯
npm run build

# 2. é…ç½®ç¯å¢ƒå˜é‡
export MONGODB_URL="mongodb://prod-server:27017/wr124"
export DEBUG=false

# 3. ä½¿ç”¨è¿›ç¨‹ç®¡ç†å™¨å¯åŠ¨
pm2 start "python -m shrimp.main" --name mcp-server
pm2 start "python script/run_agent.py" --name agent-service
```

### Docker éƒ¨ç½²
```yaml
# docker-compose.yml ç¤ºä¾‹
version: '3.8'
services:
  mongodb:
    image: mongo:4.4
  mcp-server:
    build: ./shrimp
  frontend:
    build: ./frontend
  agent:
    build: ./wr124
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¼€å‘ç¯å¢ƒè®¾ç½®
1. Fork é¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature/new-feature`
3. æäº¤ä»£ç ï¼š `git commit -m "Add new feature"`
4. æ¨é€åˆ°åˆ†æ”¯ï¼š `git push origin feature/new-feature`
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ
- éµå¾ª PEP 8 Python ç¼–ç è§„èŒƒ
- ä½¿ç”¨ Type Hints è¿›è¡Œç±»å‹æ³¨è§£
- ç¼–å†™å•å…ƒæµ‹è¯•è¦†ç›–æ–°åŠŸèƒ½
- æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT License å¼€æºåè®®ï¼Œå…è®¸å•†ä¸šä½¿ç”¨å’Œä¿®æ”¹ã€‚

## ğŸ™‹â€â™‚ï¸ æ”¯æŒå’Œè”ç³»

- **æ–‡æ¡£**ï¼š`/docs/` ç›®å½•ä¸‹åŒ…å«è¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£
- **Issues**ï¼šGitHub Issues è¿›è¡Œé—®é¢˜æŠ¥å‘Š
- **Discussion**ï¼šGitHub Discussions è¿›è¡ŒæŠ€æœ¯è®¨è®º

---

**WR124** - å°† AI æ™ºèƒ½ä½“ä¸ç°ä»£é¡¹ç›®ç®¡ç†å®Œç¾èåˆï¼Œè®©å¤æ‚é¡¹ç›®å¼€å‘å˜å¾—ç®€å•è€Œé«˜æ•ˆã€‚